
// ==UserScript==
// @name         Krunker Quoli
// @namespace    https://github.com/Woyken/krunker-qoli
// @version      0.5.11
// @description  Krunker quality of life improvements
// @author       Woyken
// @match        https://krunker.io/*
// @grant        none
// @run-at       document-start
// @downloadURL  https://woyken.github.io/krunker-qoli/script.user.js
// ==/UserScript==
/**/

function Qe(){throw window.alert('[Krunker Qoli] Script was injected too late, please use "instant inject" option'),"Script injected too late, don't want to risk alarming anticheat"}document.getElementsByTagName("script").length>0&&Qe();function Xe(e,t,n){const s=t,o=Object.getOwnPropertyNames(s);for(let r=0;r<o.length;r+=1){const i=Object.getOwnPropertyDescriptor(s,o[r]);if(i){const c={...i};i.get&&(c.get=i.get.bind(n)),i.set&&(c.set=i.set.bind(n)),typeof i.value=="function"&&(c.value=i.value.bind(n)),(c.get||c.set||c.value)&&Object.defineProperty(e,o[r],c)}}}function X(e,t,n){let s=Object.getPrototypeOf(t);for(;s!=null;)Xe(e,s,n),s=Object.getPrototypeOf(s)}const q=new Map;function Le(e){if(q.has(e))return q.get(e);const t=Object.getPrototypeOf(e);let n;return t?n=Object.create(Le(t)):n=Object.create(null),Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),q.set(e,n),n}function x(e,t){const n=Object.getOwnPropertyNames(t).filter(s=>!new Array("prototype").includes(s));for(let s=0;s<n.length;s+=1){const o=Object.getOwnPropertyDescriptor(t,n[s]);if(o){const r={...o};o.get&&(r.get=o.get.bind(t)),o.set&&(r.set=o.set.bind(t)),typeof o.value=="function"&&(r.value=o.value.bind(t)),(r.get||r.set||r.value)&&Object.defineProperty(e,n[s],r)}}}const Ye=(e,t)=>class extends e{constructor(...n){super(...n),Object.setPrototypeOf(this,t)}};function k(e){const t=Ye(e,Le(e.prototype));return x(t,e),t}const l=k(Array),Ce=k(MessageChannel),qe=Symbol.apply.bind(Symbol);function C(...e){return qe(null,e)}x(C,Symbol);const P=k(Object),Ze=k(Map),Y=k(Promise),M=k(Error),ee=Object.create(null);x(ee,Math);let oe=!1;Proxy.prototype||(oe=!0);oe&&(Proxy.prototype=Object.create(null));const Pe=k(Proxy);oe&&delete Proxy.prototype;new l;const et=(e,t)=>e===t;C("solid-proxy");C("solid-track");C("solid-dev-component");const $={equals:et};let Se=Re;const U={},O=1,_=2,Ie={owned:null,cleanups:null,context:null,owner:null};var m=null;let F=null,w=null,N=null,h=null,L=null,re=0;function tt(e,t){const n=w,s=m,o=e.length===0,r=o?Ie:{owned:null,cleanups:null,context:null,owner:t||s},i=o?e:()=>e(()=>le(r));m=r,w=null;try{return ce(i,!0)}finally{w=n,m=s}}function f(e,t){t=t?P.assign({},$,t):$;const n={value:e,observers:null,observerSlots:null,pending:U,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.pending!==U?n.pending:n.value)),ie(n,o));return new l(Oe.bind(n),s)}function nt(e,t,n){const s=ae(e,t,!0,O);B(s)}function g(e,t,n){Se=ct;const s=ae(e,t,!1,O);s.user=!0,L?L.push(s):B(s)}function he(e,t,n){n=n?P.assign({},$,n):$;const s=ae(e,t,!0,0);return s.pending=U,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,B(s),Oe.bind(s)}function st(e){if(N)return e();let t;const n=N=new l;try{t=e()}finally{N=null}return ce(()=>{for(let s=0;s<n.length;s+=1){const o=n[s];if(o.pending!==U){const r=o.pending;o.pending=U,ie(o,r)}}},!1),t}function Ae(e){let t,n=w;return w=null,t=e(),w=n,t}function v(e){return m===null||(m.cleanups===null?m.cleanups=new l(e):m.cleanups.push(e)),e}function ot(e){const t=C("context");return{id:t,Provider:lt(t),defaultValue:e}}function rt(e){const t=he(e);return he(()=>te(t()))}function Oe(){const e=F;if(this.sources&&(this.state||e)){const t=h;h=null,this.state===O||e?B(this):z(this),h=t}if(w){const t=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(t)):(w.sources=new l(this),w.sourceSlots=new l(t)),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=new l(w),this.observerSlots=new l(w.sources.length-1))}return this.value}function ie(e,t,n){if(N)return e.pending===U&&N.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&ce(()=>{for(let o=0;o<e.observers.length;o+=1){const r=e.observers[o];s&&F.disposed.has(r),(s&&!r.tState||!s&&!r.state)&&(r.pure?h.push(r):L.push(r),r.observers&&Me(r)),s||(r.state=O)}if(h.length>1e6)throw h=new l,new M},!1),t}function B(e){if(!e.fn)return;le(e);const t=m,n=w,s=re;w=m=e,it(e,e.value,s),w=n,m=t}function it(e,t,n){let s;try{s=e.fn(t)}catch(o){Ue(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?ie(e,s):e.value=s,e.updatedAt=n)}function ae(e,t,n,s=O,o){const r={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:m,context:null,pure:n};return m===null||m!==Ie&&(m.owned?m.owned.push(r):m.owned=new l(r)),r}function W(e){const t=F;if(e.state===0||t)return;if(e.state===_||t)return z(e);if(e.suspense&&Ae(e.suspense.inFallback))return e.suspense.effects.push(e);const n=new l(e);for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<re);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===O||t)B(e);else if(e.state===_||t){const o=h;h=null,z(e,n[0]),h=o}}function ce(e,t){if(h)return e();let n=!1;t||(h=new l),L?n=!0:L=new l,re++;try{const s=e();return at(n),s}catch(s){h||(L=null),Ue(s)}}function at(e){h&&(Re(h),h=null),!e&&(L.length?st(()=>{Se(L),L=null}):L=null)}function Re(e){for(let t=0;t<e.length;t++)W(e[t])}function ct(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:W(o)}const s=e.length;for(t=0;t<n;t++)W(e[t]);for(t=s;t<e.length;t++)W(e[t])}function z(e,t){const n=F;e.state=0;for(let s=0;s<e.sources.length;s+=1){const o=e.sources[s];o.sources&&(o.state===O||n?o!==t&&W(o):(o.state===_||n)&&z(o,t))}}function Me(e){const t=F;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=_,s.pure?h.push(s):L.push(s),s.observers&&Me(s))}}function le(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const r=o.pop(),i=n.observerSlots.pop();s<o.length&&(r.sourceSlots[i]=s,o[s]=r,n.observerSlots[s]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)le(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Ue(e){throw e}function te(e){if(typeof e=="function"&&!e.length)return te(e());if(l.isArray(e)){const t=new l;for(let n=0;n<e.length;n++){const s=te(e[n]);l.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function lt(e){return function(n){let s;return nt(()=>s=Ae(()=>(m.context={[e]:n.value},rt(()=>n.children)))),s}}C("fallback");ot();const d={};X(d,document,document);const[rn,ut]=f(!1),[dt,ft]=f(!1),[xe,pt]=f(!1),[gt,wt]=f(!1),[mt,ht]=f(!1),ue={};X(ue,console,console);x(ue,console);class de{constructor(...t){this.argsScope=t}createScopedLogger(...t){return new de(...this.argsScope,...t)}log(...t){ue.log(...this.argsScope,...t)}}function S(...e){return new de("[Krunker Qoli]",...e)}const bt=S("[documentState]"),[D,be]=f(!1);d.readyState!=="complete"?d.addEventListener("readystatechange",function e(){d.readyState==="complete"&&(d.removeEventListener("readystatechange",e),bt.log("document readyState complete event received, setting state true"),be(!0))}):be(!0);function yt(){const[e,t]=f(d.readyState),n=()=>d.readyState==="loading",s=()=>d.readyState==="interactive",o=()=>d.readyState==="complete",[r,i]=f(n()||s()||o()),[c,a]=f(s()||o()),[u,b]=f(o());return d.addEventListener("readystatechange",function y(){t(d.readyState),i(n()||s()||o()),a(s()||o()),b(o()),o()&&d.removeEventListener("readystatechange",y)}),{documentReadyState:e,isDocumentAtLeastLoading:r,isDocumentAtLeastInteractive:c,isDocumentAtLeastComplete:u}}const vt=k(MutationObserver);function Et(e){return new vt(t=>{t.forEach(n=>{n.type==="attributes"&&n.attributeName==="style"&&e(n.target.style)})})}function G(e){return Et(t=>{const n=t.display==="block";e(n)})}const H={attributes:!0,attributeFilter:new l("style")},Z=S("[adPopupDismisser]");function kt(){Z.log("initAdPopupDismisser");const[e,t]=f(!1),n=G(t);g(()=>{if(!D())return;Z.log("document readyState complete, adding observer");const s=d.getElementById("popupHolder");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),g(()=>{!dt()||(Z.log("isAdPopupActive effect",e()),e()&&d.getElementById("popupBack")?.click())})}const Q=k(KeyboardEvent);function De(){const[e,t]=f(!1);function n(){t(!!d.pointerLockElement)}return g(()=>{!D()||(d.addEventListener("pointerlockchange",n),v(()=>{d.removeEventListener("pointerlockchange",n)}))}),e}function fe(){const[e,t]=f(!1),n=G(t);return g(()=>{if(!D())return;const s=d.getElementById("inGameUI");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),e}const K=S("[autoReload]");function Lt(){K.log("initAutoReload");const e=fe(),[t,n]=f(!1),s=G(n);g(()=>{if(!D())return;K.log("document readyState complete, adding observer");const c=d.getElementById("reloadMsg");c&&(n(c.style.display==="block"),s.observe(c,H),v(s.disconnect.bind(s)))});const[o,r]=f(!1);g(()=>{if(!xe()||!t())return;K.log("pressing down reload button");const c=l.from(d.getElementsByTagName("canvas")).pop(),a={code:"KeyR",composed:!0,key:"r",keyCode:82,which:82,bubbles:!0,cancelable:!0};c?.dispatchEvent(new Q("keydown",a)),r(!0)});const i=De();g(()=>{if(!o()||!e()||!i()||t())return;K.log("releasing reload button");const c=l.from(d.getElementsByTagName("canvas")).pop(),a={code:"KeyR",composed:!0,key:"r",keyCode:82,which:82,bubbles:!0,cancelable:!0};c?.dispatchEvent(new Q("keyup",a))})}const ye=k(MouseEvent),p={location:{}};X(p,window,window);X(p.location,window.location,window.location);x(p.location,window.location);x(p,window);function Ct(){const[e,t]=f(d.hasFocus()),n=()=>t(!0),s=()=>t(!1);return p.addEventListener("focus",n),p.addEventListener("blur",s),v(()=>{p.removeEventListener("focus",n),p.removeEventListener("blur",s)}),e}function Pt(){const[e,t]=f(!1),n=G(t);return g(()=>{if(!D())return;const s=d.getElementById("killCardHolder");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),e}let Te=()=>({events:{},emit(e,...t){let n=this.events[e]||new l;for(let s=0,o=n.length;s<o;s++)n[s](...t)},on(e,t){return this.events[e]?.push(t)||(this.events[e]=new l(t)),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});function Ne(e){return{on:e.on.bind(e)}}const St=Function.prototype.apply.apply.bind(Function.prototype.apply);function It(e){return typeof e!="object"||e==null?!1:"stack"in e}function pe(e,t,n){const s=S("[createFunctionProxy]",e,t,n);return s.log("creating function proxy"),new Pe(e,{apply(o,r,i){const c=s.createScopedLogger("[apply]",o,r,i);try{t?.(...i)}catch(u){c.log("beforeCallback error",u)}let a;try{a=St(o,new l(r,i))}catch(u){throw c.log("EXCEPTION",u),It(u)&&(u.stack.includes("Object.apply")?u.stack=u.stack.replace(/\n.*Object\.apply.*/,""):u.stack.includes("apply@")&&(u.stack=u.stack.replace(/.*apply@.*\n/,""))),c.log("EXCEPTION before rethrow",u),u}try{n?.(a,...i)}catch(u){c.log("afterCallback error",u)}return a}})}const We=Te(),At=document.exitPointerLock;document.exitPointerLock=pe(At,void 0,()=>We.emit("calledExitPointerLock"));const Ot=Ne(We),Fe=S("[fastRespawn]");function Rt(){Fe.log("trying to activate game");const e=l.from(d.getElementsByTagName("canvas")).pop();e?.dispatchEvent(new ye("mousedown",{bubbles:!0,cancelable:!0})),e?.dispatchEvent(new ye("mouseup",{bubbles:!0,cancelable:!0}))}function Mt(){Fe.log("initFastRespawn");const e=Pt(),t=fe(),n=De(),s=Ct(),[o,r]=f(!1),i=Ot.on("calledExitPointerLock",()=>{n()&&r(!0)});v(()=>{i()}),g(()=>{n()&&r(!1)}),g(()=>{!xe()||!s()||!o()||n()||t()||!e()||(r(!1),Rt())})}const ge=k(URL),Ut=k(WeakMap),xt=k(Number),Be=C("Comlink.proxy"),Dt=C("Comlink.endpoint"),Tt=C("Comlink.releaseProxy"),ne=C("Comlink.thrown"),Ge=e=>typeof e=="object"&&e!==null||typeof e=="function",Nt={canHandle:e=>Ge(e)&&e[Be],serialize(e){const{port1:t,port2:n}=new Ce;return je(e,t),new l(n,new l(n))},deserialize(e){return e.start(),Ve(e)}},Wt={canHandle:e=>Ge(e)&&ne in e,serialize({value:e}){let t;return e instanceof M?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},new l(t,new l)},deserialize(e){throw e.isError?P.assign(new M(e.value.message),e.value):e.value}},He=new Ze(new l(new l("proxy",Nt),new l("throw",Wt)));function je(e,t=self){t.addEventListener("message",function n(s){if(!s||!s.data)return;const{id:o,type:r,path:i}=P.assign({path:new l},s.data),c=(s.data.argumentList||new l).map(A);let a;try{const u=i.slice(0,-1).reduce((y,T)=>y[T],e),b=i.reduce((y,T)=>y[T],e);switch(r){case"GET":a=b;break;case"SET":u[i.slice(-1)[0]]=A(s.data.value),a=!0;break;case"APPLY":a=b.apply(u,c);break;case"CONSTRUCT":{const y=new b(...c);a=$e(y)}break;case"ENDPOINT":{const{port1:y,port2:T}=new Ce;je(e,T),a=Gt(y,new l(y))}break;case"RELEASE":a=void 0;break;default:return}}catch(u){a={value:u,[ne]:0}}Y.resolve(a).catch(u=>({value:u,[ne]:0})).then(u=>{const[b,y]=we(u);t.postMessage(P.assign(P.assign({},b),{id:o}),y),r==="RELEASE"&&(t.removeEventListener("message",n),Ke(t))})}),t.start&&t.start()}function Ft(e){return e.constructor.name==="MessagePort"}function Ke(e){Ft(e)&&e.close()}function Ve(e,t){return se(e,new l,t)}function V(e){if(e)throw new M("Proxy has been released and is not useable")}function se(e,t=new l,n=function(){}){let s=!1;const o=new Pe(n,{get(r,i){if(V(s),i===Tt)return()=>R(e,{type:"RELEASE",path:t.map(c=>c.toString())}).then(()=>{Ke(e),s=!0});if(i==="then"){if(t.length===0)return{then:()=>o};const c=R(e,{type:"GET",path:t.map(a=>a.toString())}).then(A);return c.then.bind(c)}return se(e,new l(...t,i))},set(r,i,c){V(s);const[a,u]=we(c);return R(e,{type:"SET",path:new l(...t,i).map(b=>b.toString()),value:a},u).then(A)},apply(r,i,c){V(s);const a=t[t.length-1];if(a===Dt)return R(e,{type:"ENDPOINT"}).then(A);if(a==="bind")return se(e,t.slice(0,-1));const[u,b]=ve(c);return R(e,{type:"APPLY",path:t.map(y=>y.toString()),argumentList:u},b).then(A)},construct(r,i){V(s);const[c,a]=ve(i);return R(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:c},a).then(A)}});return o}function Bt(e){return l.prototype.concat.apply(new l,e)}function ve(e){const t=e.map(we);return new l(t.map(n=>n[0]),Bt(t.map(n=>n[1])))}const Je=new Ut;function Gt(e,t){return Je.set(e,t),e}function $e(e){return P.assign(e,{[Be]:!0})}function Ht(e,t=self,n="*"){return{postMessage:(s,o)=>e.postMessage(s,n,o),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function we(e){for(const[t,n]of He)if(n.canHandle(e)){const[s,o]=n.serialize(e);return new l({type:"HANDLER",name:t,value:s},o)}return new l({type:"RAW",value:e},Je.get(e)||new l)}function A(e){switch(e.type){case"HANDLER":return He.get(e.name).deserialize(e.value);case"RAW":return e.value}}function R(e,t,n){return new Y(s=>{const o=jt();e.addEventListener("message",function r(i){!i.data||!i.data.id||i.data.id!==o||(e.removeEventListener("message",r),s(i.data))}),e.start&&e.start(),e.postMessage(P.assign({id:o},t),n)})}function jt(){return new l(4).fill(0).map(()=>ee.floor(ee.random()*xt.MAX_SAFE_INTEGER).toString(16)).join("-")}const Kt="0.5.11",Vt=Kt;function Jt(...e){const t=Ht(...e),n={},s=t.addEventListener.bind(t);t.addEventListener=(...i)=>{const c=n[i[0]];return c?c.push(i[1]):n[i[0]]=new l(i[1]),s(...i)};const o=t.removeEventListener.bind(t);t.removeEventListener=(...i)=>{const c=n[i[0]];return c&&(n[i[0]]=c.filter(a=>a!==i[1])),o(...i)};function r(){P.keys(n).forEach(i=>{n[i].forEach(c=>{o(i,c)})})}return{unsubscribeAll:r,...t}}const $t=S("[useRemoveClosedWindows]");function _t(e,t){const n=setInterval(()=>{const s=e();s&&s.closed&&($t.log("is closed",e()),t())},1e3);v(()=>clearInterval(n))}const j=Te(),zt=window.history.pushState;window.history.pushState=pe(zt,void 0,()=>j.emit("locationChanged"));const Qt=window.history.replaceState;window.history.replaceState=pe(Qt,void 0,()=>j.emit("locationChanged"));window.addEventListener("hashchange",()=>j.emit("locationChanged"));window.addEventListener("popstate",()=>j.emit("locationChanged"));const Xt=Ne(j);function _e(){const[e,t]=f(p.location.href);return Xt.on("locationChanged",()=>{t(p.location.href)}),e}const E=S("[Settings window communication]"),ze=ge,me=new ze("https://woyken.github.io/krunker-qoli"),I={};p.addEventListener("message",e=>{e.origin===me.origin&&e.stopImmediatePropagation(),I.message?.forEach(t=>{"handleEvent"in t?t.handleEvent(e):t(e)})});function Yt(e){E.log("settingsUpdatedCallback",e),pt(e.enabledFastRespawn),ft(e.enabledAdPopupDismisser),ut(e.enabledAutoReload),wt(e.enabledWindowManager),ht(e.enabledAutoClickJunkPickup)}function Ee(e,t){return new Y((n,s)=>{setTimeout(()=>{s(new M("Promise timed out"))},t),e.then(n,s)})}let ke=!1;function qt(){const[e,t]=f();if(p.opener)t(p.opener);else{const{isDocumentAtLeastInteractive:n}=yt();g(()=>{if(ke||!n())return;E.log("opening new settings window");const s=p.open(new ze("#userScriptSettings",me).href,"settingsWindow","width=400,height=450");if(ke=!0,!s)throw p.alert("Failed to open settings window, allow popups for Krunker Qoli to work"),new M("Failed to open settings window");t(s),v(()=>{E.log("onCleanup, closing settings window",s),s.close()});function o(){E.log("handleBeforeUnload, closing settings window",s),s?.close()}p.addEventListener("beforeunload",o),v(()=>p.removeEventListener("beforeunload",o)),_t(e,t)})}return e}async function Zt(e){const[t,n]=f("connecting");v(()=>n("disposed"));const s=Jt(e,{addEventListener(a,u){I[a]?I[a].push(u):I[a]=new l(u)},removeEventListener(a,u){I[a]&&(I[a]=I[a].filter(b=>b!==u))}},"*"),o=Ve(s);v(()=>s.unsubscribeAll());function r(){o.scriptUnloading().catch(a=>E.log("on beforeUnload error",a))}p.addEventListener("beforeunload",r),v(()=>p.removeEventListener("beforeunload",r));const i=_e();g(()=>{o.scriptLocationChanged(i())});const c=new Y(a=>{E.log("waiting for settings window");const u=setInterval(()=>{E.log("checking for settings window"),Ee(o.ping,200).then(()=>{clearInterval(u),a()}).catch(b=>{E.log("[onSettingsWindowAvailablePromise]","error",b)})},200)});return Ee(c,6e4).then(()=>{o.onUnloadPromise.then(()=>{E.log("settings window unloaded"),n("disposed")}),E.log("settings window available"),n("available")}).catch(a=>{E.log("settings window connection error",a),n("error")}),g(()=>{E.log("settings connection state changed",t()),t()==="available"&&(E.log("registering for remote settings callbacks"),o.registerSettingsCallback(Vt,$e(Yt)))}),{state:t,remoteExposedSettings:o}}function en(){const e=qt(),[t,n]=f();return g(()=>{const s=e();if(!s)return;const o=Zt(s);n(o)}),t}function tn(){g(()=>{if(!gt()||p.opener)return;const e=p.location.href,t=new ge(`#windowManager?redirectKrunkerUrl=${e}`,me);p.open(t,"_self")})}function nn(){const[e,t]=f(!1),n=_e();return g(()=>new ge(n()).pathname==="/"?t(!0):t(!1)),e}const J=S("[autoPickupJunk]");function sn(){J.log("initAutoPickupJunk");const e=fe(),[t,n]=f(!1),[s,o]=f(!1),r=G(n);g(()=>{if(!D()||!mt())return;J.log("document readyState complete, adding observer");const a=d.getElementById("interactMsg");a&&(o(a.innerHTML.includes("to pickup Junk")),n(a.style.display==="block"),r.observe(a,H),v(r.disconnect.bind(r)))});const[i,c]=f(!1);g(()=>{if(!t()||!s())return;J.log("pressing down interact button");const a=l.from(d.getElementsByTagName("canvas")).pop(),u={code:"KeyG",composed:!0,key:"g",keyCode:71,which:71,bubbles:!0,cancelable:!0};a?.dispatchEvent(new Q("keydown",u)),c(!0)}),g(()=>{if(!i()||!e()||t())return;J.log("releasing interact button");const a=l.from(d.getElementsByTagName("canvas")).pop(),u={code:"KeyG",composed:!0,key:"g",keyCode:71,which:71,bubbles:!0,cancelable:!0};a?.dispatchEvent(new Q("keyup",u))})}function on(){tt(()=>{const e=nn();g(()=>{!e()||(kt(),Mt(),Lt(),sn(),tn(),en())})})}on();
