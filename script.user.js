
// ==UserScript==
// @name         Krunker Quoli
// @namespace    https://github.com/Woyken/krunker-qoli
// @version      0.5.10
// @description  Krunker quality of life improvements
// @author       Woyken
// @match        https://krunker.io/*
// @grant        none
// @run-at       document-start
// @downloadURL  https://woyken.github.io/krunker-qoli/script.user.js
// ==/UserScript==
/**/

function ze(){throw window.alert('[Krunker Qoli] Script was injected too late, please use "instant inject" option'),"Script injected too late, don't want to risk alarming anticheat"}document.getElementsByTagName("script").length>0&&ze();function Qe(e,t,n){const s=t,o=Object.getOwnPropertyNames(s);for(let r=0;r<o.length;r+=1){const i=Object.getOwnPropertyDescriptor(s,o[r]);if(i){const c={...i};i.get&&(c.get=i.get.bind(n)),i.set&&(c.set=i.set.bind(n)),typeof i.value=="function"&&(c.value=i.value.bind(n)),(c.get||c.set||c.value)&&Object.defineProperty(e,o[r],c)}}}function X(e,t,n){let s=Object.getPrototypeOf(t);for(;s!=null;)Qe(e,s,n),s=Object.getPrototypeOf(s)}const q=new Map;function Ee(e){if(q.has(e))return q.get(e);const t=Object.getPrototypeOf(e);let n;return t?n=Object.create(Ee(t)):n=Object.create(null),Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),q.set(e,n),n}function D(e,t){const n=Object.getOwnPropertyNames(t).filter(s=>!new Array("prototype").includes(s));for(let s=0;s<n.length;s+=1){const o=Object.getOwnPropertyDescriptor(t,n[s]);if(o){const r={...o};o.get&&(r.get=o.get.bind(t)),o.set&&(r.set=o.set.bind(t)),typeof o.value=="function"&&(r.value=o.value.bind(t)),(r.get||r.set||r.value)&&Object.defineProperty(e,n[s],r)}}}const Xe=(e,t)=>class extends e{constructor(...n){super(...n),Object.setPrototypeOf(this,t)}};function k(e){const t=Xe(e,Ee(e.prototype));return D(t,e),t}const l=k(Array),ke=k(MessageChannel),Ye=Symbol.apply.bind(Symbol);function C(...e){return Ye(null,e)}D(C,Symbol);const P=k(Object),qe=k(Map),Y=k(Promise),R=k(Error),ee=Object.create(null);D(ee,Math);let oe=!1;Proxy.prototype||(oe=!0);oe&&(Proxy.prototype=Object.create(null));const Le=k(Proxy);oe&&delete Proxy.prototype;new l;const Ze=(e,t)=>e===t;C("solid-proxy");C("solid-track");C("solid-dev-component");const $={equals:Ze};let Ce=Ae;const U={},O=1,_=2,et={owned:null,cleanups:null,context:null,owner:null};var y=null;let F=null,m=null,N=null,w=null,L=null,re=0;function f(e,t){t=t?P.assign({},$,t):$;const n={value:e,observers:null,observerSlots:null,pending:U,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.pending!==U?n.pending:n.value)),ie(n,o));return new l(Se.bind(n),s)}function tt(e,t,n){const s=ae(e,t,!0,O);B(s)}function g(e,t,n){Ce=at;const s=ae(e,t,!1,O);s.user=!0,L?L.push(s):B(s)}function me(e,t,n){n=n?P.assign({},$,n):$;const s=ae(e,t,!0,0);return s.pending=U,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,B(s),Se.bind(s)}function nt(e){if(N)return e();let t;const n=N=new l;try{t=e()}finally{N=null}return Ie(()=>{for(let s=0;s<n.length;s+=1){const o=n[s];if(o.pending!==U){const r=o.pending;o.pending=U,ie(o,r)}}},!1),t}function Pe(e){let t,n=m;return m=null,t=e(),m=n,t}function v(e){return y===null||(y.cleanups===null?y.cleanups=new l(e):y.cleanups.push(e)),e}function st(e){const t=C("context");return{id:t,Provider:ct(t),defaultValue:e}}function ot(e){const t=me(e);return me(()=>te(t()))}function Se(){const e=F;if(this.sources&&(this.state||e)){const t=w;w=null,this.state===O||e?B(this):z(this),w=t}if(m){const t=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(t)):(m.sources=new l(this),m.sourceSlots=new l(t)),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=new l(m),this.observerSlots=new l(m.sources.length-1))}return this.value}function ie(e,t,n){if(N)return e.pending===U&&N.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&Ie(()=>{for(let o=0;o<e.observers.length;o+=1){const r=e.observers[o];s&&F.disposed.has(r),(s&&!r.tState||!s&&!r.state)&&(r.pure?w.push(r):L.push(r),r.observers&&Oe(r)),s||(r.state=O)}if(w.length>1e6)throw w=new l,new R},!1),t}function B(e){if(!e.fn)return;Me(e);const t=y,n=m,s=re;m=y=e,rt(e,e.value,s),m=n,y=t}function rt(e,t,n){let s;try{s=e.fn(t)}catch(o){Re(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?ie(e,s):e.value=s,e.updatedAt=n)}function ae(e,t,n,s=O,o){const r={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:y,context:null,pure:n};return y===null||y!==et&&(y.owned?y.owned.push(r):y.owned=new l(r)),r}function W(e){const t=F;if(e.state===0||t)return;if(e.state===_||t)return z(e);if(e.suspense&&Pe(e.suspense.inFallback))return e.suspense.effects.push(e);const n=new l(e);for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<re);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===O||t)B(e);else if(e.state===_||t){const o=w;w=null,z(e,n[0]),w=o}}function Ie(e,t){if(w)return e();let n=!1;t||(w=new l),L?n=!0:L=new l,re++;try{const s=e();return it(n),s}catch(s){w||(L=null),Re(s)}}function it(e){w&&(Ae(w),w=null),!e&&(L.length?nt(()=>{Ce(L),L=null}):L=null)}function Ae(e){for(let t=0;t<e.length;t++)W(e[t])}function at(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:W(o)}const s=e.length;for(t=0;t<n;t++)W(e[t]);for(t=s;t<e.length;t++)W(e[t])}function z(e,t){const n=F;e.state=0;for(let s=0;s<e.sources.length;s+=1){const o=e.sources[s];o.sources&&(o.state===O||n?o!==t&&W(o):(o.state===_||n)&&z(o,t))}}function Oe(e){const t=F;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=_,s.pure?w.push(s):L.push(s),s.observers&&Oe(s))}}function Me(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const r=o.pop(),i=n.observerSlots.pop();s<o.length&&(r.sourceSlots[i]=s,o[s]=r,n.observerSlots[s]=i)}}if(e.owned){for(t=0;t<e.owned.length;t++)Me(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Re(e){throw e}function te(e){if(typeof e=="function"&&!e.length)return te(e());if(l.isArray(e)){const t=new l;for(let n=0;n<e.length;n++){const s=te(e[n]);l.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function ct(e){return function(n){let s;return tt(()=>s=Pe(()=>(y.context={[e]:n.value},ot(()=>n.children)))),s}}C("fallback");st();const d={};X(d,document,document);const[on,lt]=f(!1),[ut,dt]=f(!1),[Ue,ft]=f(!1),[pt,gt]=f(!1),[mt,wt]=f(!1),ce={};X(ce,console,console);D(ce,console);class le{constructor(...t){this.argsScope=t}createScopedLogger(...t){return new le(...this.argsScope,...t)}log(...t){ce.log(...this.argsScope,...t)}}function S(...e){return new le("[Krunker Qoli]",...e)}const ht=S("[documentState]"),[x,we]=f(!1);d.readyState!=="complete"?d.addEventListener("readystatechange",function e(){d.readyState==="complete"&&(d.removeEventListener("readystatechange",e),ht.log("document readyState complete event received, setting state true"),we(!0))}):we(!0);function bt(){const[e,t]=f(d.readyState),n=()=>d.readyState==="loading",s=()=>d.readyState==="interactive",o=()=>d.readyState==="complete",[r,i]=f(n()||s()||o()),[c,a]=f(s()||o()),[u,h]=f(o());return d.addEventListener("readystatechange",function b(){t(d.readyState),i(n()||s()||o()),a(s()||o()),h(o()),o()&&d.removeEventListener("readystatechange",b)}),{documentReadyState:e,isDocumentAtLeastLoading:r,isDocumentAtLeastInteractive:c,isDocumentAtLeastComplete:u}}const yt=k(MutationObserver);function vt(e){return new yt(t=>{t.forEach(n=>{n.type==="attributes"&&n.attributeName==="style"&&e(n.target.style)})})}function G(e){return vt(t=>{const n=t.display==="block";e(n)})}const H={attributes:!0,attributeFilter:new l("style")},Z=S("[adPopupDismisser]");function Et(){Z.log("initAdPopupDismisser");const[e,t]=f(!1),n=G(t);g(()=>{if(!x())return;Z.log("document readyState complete, adding observer");const s=d.getElementById("popupHolder");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),g(()=>{!ut()||(Z.log("isAdPopupActive effect",e()),e()&&d.getElementById("popupBack")?.click())})}const Q=k(KeyboardEvent);function De(){const[e,t]=f(!1);function n(){t(!!d.pointerLockElement)}return g(()=>{!x()||(d.addEventListener("pointerlockchange",n),v(()=>{d.removeEventListener("pointerlockchange",n)}))}),e}function ue(){const[e,t]=f(!1),n=G(t);return g(()=>{if(!x())return;const s=d.getElementById("inGameUI");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),e}const K=S("[autoReload]");function kt(){K.log("initAutoReload");const e=ue(),[t,n]=f(!1),s=G(n);g(()=>{if(!x())return;K.log("document readyState complete, adding observer");const c=d.getElementById("reloadMsg");c&&(n(c.style.display==="block"),s.observe(c,H),v(s.disconnect.bind(s)))});const[o,r]=f(!1);g(()=>{if(!Ue()||!t())return;K.log("pressing down reload button");const c=l.from(d.getElementsByTagName("canvas")).pop(),a={code:"KeyR",composed:!0,key:"r",keyCode:82,which:82,bubbles:!0,cancelable:!0};c?.dispatchEvent(new Q("keydown",a)),r(!0)});const i=De();g(()=>{if(!o()||!e()||!i()||t())return;K.log("releasing reload button");const c=l.from(d.getElementsByTagName("canvas")).pop(),a={code:"KeyR",composed:!0,key:"r",keyCode:82,which:82,bubbles:!0,cancelable:!0};c?.dispatchEvent(new Q("keyup",a))})}const he=k(MouseEvent),p={location:{}};X(p,window,window);X(p.location,window.location,window.location);D(p.location,window.location);D(p,window);function Lt(){const[e,t]=f(d.hasFocus()),n=()=>t(!0),s=()=>t(!1);return p.addEventListener("focus",n),p.addEventListener("blur",s),v(()=>{p.removeEventListener("focus",n),p.removeEventListener("blur",s)}),e}function Ct(){const[e,t]=f(!1),n=G(t);return g(()=>{if(!x())return;const s=d.getElementById("killCardHolder");s&&(t(s.style.display==="block"),n.observe(s,H),v(n.disconnect.bind(n)))}),e}let xe=()=>({events:{},emit(e,...t){let n=this.events[e]||new l;for(let s=0,o=n.length;s<o;s++)n[s](...t)},on(e,t){return this.events[e]?.push(t)||(this.events[e]=new l(t)),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});function Te(e){return{on:e.on.bind(e)}}const Pt=Function.prototype.apply.apply.bind(Function.prototype.apply);function St(e){return typeof e!="object"||e==null?!1:"stack"in e}function de(e,t,n){const s=S("[createFunctionProxy]",e,t,n);return s.log("creating function proxy"),new Le(e,{apply(o,r,i){const c=s.createScopedLogger("[apply]",o,r,i);try{t?.(...i)}catch(u){c.log("beforeCallback error",u)}let a;try{a=Pt(o,new l(r,i))}catch(u){throw c.log("EXCEPTION",u),St(u)&&(u.stack.includes("Object.apply")?u.stack=u.stack.replace(/\n.*Object\.apply.*/,""):u.stack.includes("apply@")&&(u.stack=u.stack.replace(/.*apply@.*\n/,""))),c.log("EXCEPTION before rethrow",u),u}try{n?.(a,...i)}catch(u){c.log("afterCallback error",u)}return a}})}const Ne=xe(),It=document.exitPointerLock;document.exitPointerLock=de(It,void 0,()=>Ne.emit("calledExitPointerLock"));var At=Te(Ne);const We=S("[fastRespawn]");function Ot(){We.log("trying to activate game");const e=l.from(d.getElementsByTagName("canvas")).pop();e?.dispatchEvent(new he("mousedown",{bubbles:!0,cancelable:!0})),e?.dispatchEvent(new he("mouseup",{bubbles:!0,cancelable:!0}))}function Mt(){We.log("initFastRespawn");const e=Ct(),t=ue(),n=De(),s=Lt(),[o,r]=f(!1),i=At.on("calledExitPointerLock",()=>{n()&&r(!0)});v(()=>{i()}),g(()=>{n()&&r(!1)}),g(()=>{!Ue()||!s()||!o()||n()||t()||!e()||(r(!1),Ot())})}const fe=k(URL),Rt=k(WeakMap),Ut=k(Number),Fe=C("Comlink.proxy"),Dt=C("Comlink.endpoint"),xt=C("Comlink.releaseProxy"),ne=C("Comlink.thrown"),Be=e=>typeof e=="object"&&e!==null||typeof e=="function",Tt={canHandle:e=>Be(e)&&e[Fe],serialize(e){const{port1:t,port2:n}=new ke;return He(e,t),new l(n,new l(n))},deserialize(e){return e.start(),Ke(e)}},Nt={canHandle:e=>Be(e)&&ne in e,serialize({value:e}){let t;return e instanceof R?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},new l(t,new l)},deserialize(e){throw e.isError?P.assign(new R(e.value.message),e.value):e.value}},Ge=new qe(new l(new l("proxy",Tt),new l("throw",Nt)));function He(e,t=self){t.addEventListener("message",function n(s){if(!s||!s.data)return;const{id:o,type:r,path:i}=P.assign({path:new l},s.data),c=(s.data.argumentList||new l).map(A);let a;try{const u=i.slice(0,-1).reduce((b,T)=>b[T],e),h=i.reduce((b,T)=>b[T],e);switch(r){case"GET":a=h;break;case"SET":u[i.slice(-1)[0]]=A(s.data.value),a=!0;break;case"APPLY":a=h.apply(u,c);break;case"CONSTRUCT":{const b=new h(...c);a=Je(b)}break;case"ENDPOINT":{const{port1:b,port2:T}=new ke;He(e,T),a=Bt(b,new l(b))}break;case"RELEASE":a=void 0;break;default:return}}catch(u){a={value:u,[ne]:0}}Y.resolve(a).catch(u=>({value:u,[ne]:0})).then(u=>{const[h,b]=pe(u);t.postMessage(P.assign(P.assign({},h),{id:o}),b),r==="RELEASE"&&(t.removeEventListener("message",n),je(t))})}),t.start&&t.start()}function Wt(e){return e.constructor.name==="MessagePort"}function je(e){Wt(e)&&e.close()}function Ke(e,t){return se(e,new l,t)}function V(e){if(e)throw new R("Proxy has been released and is not useable")}function se(e,t=new l,n=function(){}){let s=!1;const o=new Le(n,{get(r,i){if(V(s),i===xt)return()=>M(e,{type:"RELEASE",path:t.map(c=>c.toString())}).then(()=>{je(e),s=!0});if(i==="then"){if(t.length===0)return{then:()=>o};const c=M(e,{type:"GET",path:t.map(a=>a.toString())}).then(A);return c.then.bind(c)}return se(e,new l(...t,i))},set(r,i,c){V(s);const[a,u]=pe(c);return M(e,{type:"SET",path:new l(...t,i).map(h=>h.toString()),value:a},u).then(A)},apply(r,i,c){V(s);const a=t[t.length-1];if(a===Dt)return M(e,{type:"ENDPOINT"}).then(A);if(a==="bind")return se(e,t.slice(0,-1));const[u,h]=be(c);return M(e,{type:"APPLY",path:t.map(b=>b.toString()),argumentList:u},h).then(A)},construct(r,i){V(s);const[c,a]=be(i);return M(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:c},a).then(A)}});return o}function Ft(e){return l.prototype.concat.apply(new l,e)}function be(e){const t=e.map(pe);return new l(t.map(n=>n[0]),Ft(t.map(n=>n[1])))}const Ve=new Rt;function Bt(e,t){return Ve.set(e,t),e}function Je(e){return P.assign(e,{[Fe]:!0})}function Gt(e,t=self,n="*"){return{postMessage:(s,o)=>e.postMessage(s,n,o),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function pe(e){for(const[t,n]of Ge)if(n.canHandle(e)){const[s,o]=n.serialize(e);return new l({type:"HANDLER",name:t,value:s},o)}return new l({type:"RAW",value:e},Ve.get(e)||new l)}function A(e){switch(e.type){case"HANDLER":return Ge.get(e.name).deserialize(e.value);case"RAW":return e.value}}function M(e,t,n){return new Y(s=>{const o=Ht();e.addEventListener("message",function r(i){!i.data||!i.data.id||i.data.id!==o||(e.removeEventListener("message",r),s(i.data))}),e.start&&e.start(),e.postMessage(P.assign({id:o},t),n)})}function Ht(){return new l(4).fill(0).map(()=>ee.floor(ee.random()*Ut.MAX_SAFE_INTEGER).toString(16)).join("-")}const jt="0.5.10",Kt=jt;function Vt(...e){const t=Gt(...e),n={},s=t.addEventListener.bind(t);t.addEventListener=(...i)=>{const c=n[i[0]];return c?c.push(i[1]):n[i[0]]=new l(i[1]),s(...i)};const o=t.removeEventListener.bind(t);t.removeEventListener=(...i)=>{const c=n[i[0]];return c&&(n[i[0]]=c.filter(a=>a!==i[1])),o(...i)};function r(){P.keys(n).forEach(i=>{n[i].forEach(c=>{o(i,c)})})}return{unsubscribeAll:r,...t}}const Jt=S("[useRemoveClosedWindows]");function $t(e,t){const n=setInterval(()=>{const s=e();s&&s.closed&&(Jt.log("is closed",e()),t())},1e3);v(()=>clearInterval(n))}const j=xe(),_t=window.history.pushState;window.history.pushState=de(_t,void 0,()=>j.emit("locationChanged"));const zt=window.history.replaceState;window.history.replaceState=de(zt,void 0,()=>j.emit("locationChanged"));window.addEventListener("hashchange",()=>j.emit("locationChanged"));window.addEventListener("popstate",()=>j.emit("locationChanged"));var Qt=Te(j);function $e(){const[e,t]=f(p.location.href);return Qt.on("locationChanged",()=>{t(p.location.href)}),e}const E=S("[Settings window communication]"),_e=fe,ge=new _e("https://woyken.github.io/krunker-qoli"),I={};p.addEventListener("message",e=>{e.origin===ge.origin&&e.stopImmediatePropagation(),I.message?.forEach(t=>{"handleEvent"in t?t.handleEvent(e):t(e)})});function Xt(e){E.log("settingsUpdatedCallback",e),ft(e.enabledFastRespawn),dt(e.enabledAdPopupDismisser),lt(e.enabledAutoReload),gt(e.enabledWindowManager),wt(e.enabledAutoClickJunkPickup)}function ye(e,t){return new Y((n,s)=>{setTimeout(()=>{s(new R("Promise timed out"))},t),e.then(n,s)})}let ve=!1;function Yt(){const[e,t]=f();if(p.opener)t(p.opener);else{const{isDocumentAtLeastInteractive:n}=bt();g(()=>{if(ve||!n())return;E.log("opening new settings window");const s=p.open(new _e("#userScriptSettings",ge).href,"settingsWindow","width=400,height=450");if(ve=!0,!s)throw p.alert("Failed to open settings window, allow popups for Krunker Qoli to work"),new R("Failed to open settings window");t(s),v(()=>{E.log("onCleanup, closing settings window",s),s.close()});function o(){E.log("handleBeforeUnload, closing settings window",s),s?.close()}p.addEventListener("beforeunload",o),v(()=>p.removeEventListener("beforeunload",o)),$t(e,t)})}return e}async function qt(e){const[t,n]=f("connecting");v(()=>n("disposed"));const s=Vt(e,{addEventListener(a,u){I[a]?I[a].push(u):I[a]=new l(u)},removeEventListener(a,u){I[a]&&(I[a]=I[a].filter(h=>h!==u))}},"*"),o=Ke(s);v(()=>s.unsubscribeAll());function r(){o.scriptUnloading().catch(a=>E.log("on beforeUnload error",a))}p.addEventListener("beforeunload",r),v(()=>p.removeEventListener("beforeunload",r));const i=$e();g(()=>{o.scriptLocationChanged(i())});const c=new Y(a=>{E.log("waiting for settings window");const u=setInterval(()=>{E.log("checking for settings window"),ye(o.ping,200).then(()=>{clearInterval(u),a()}).catch(h=>{E.log("[onSettingsWindowAvailablePromise]","error",h)})},200)});return ye(c,6e4).then(()=>{o.onUnloadPromise.then(()=>{E.log("settings window unloaded"),n("disposed")}),E.log("settings window available"),n("available")}).catch(a=>{E.log("settings window connection error",a),n("error")}),g(()=>{E.log("settings connection state changed",t()),t()==="available"&&(E.log("registering for remote settings callbacks"),o.registerSettingsCallback(Kt,Je(Xt)))}),{state:t,remoteExposedSettings:o}}function Zt(){const e=Yt(),[t,n]=f();return g(()=>{const s=e();if(!s)return;const o=qt(s);n(o)}),t}function en(){g(()=>{if(!pt()||p.opener)return;const e=p.location.href,t=new fe(`#windowManager?redirectKrunkerUrl=${e}`,ge);p.open(t,"_self")})}function tn(){const[e,t]=f(!1),n=$e();return g(()=>new fe(n()).pathname==="/"?t(!0):t(!1)),e}const J=S("[autoPickupJunk]");function nn(){J.log("initAutoPickupJunk");const e=ue(),[t,n]=f(!1),[s,o]=f(!1),r=G(n);g(()=>{if(!x()||!mt())return;J.log("document readyState complete, adding observer");const a=d.getElementById("interactMsg");a&&(o(a.innerHTML.includes("to pickup Junk")),n(a.style.display==="block"),r.observe(a,H),v(r.disconnect.bind(r)))});const[i,c]=f(!1);g(()=>{if(!t()||!s())return;J.log("pressing down interact button");const a=l.from(d.getElementsByTagName("canvas")).pop(),u={code:"KeyG",composed:!0,key:"g",keyCode:71,which:71,bubbles:!0,cancelable:!0};a?.dispatchEvent(new Q("keydown",u)),c(!0)}),g(()=>{if(!i()||!e()||t())return;J.log("releasing interact button");const a=l.from(d.getElementsByTagName("canvas")).pop(),u={code:"KeyG",composed:!0,key:"g",keyCode:71,which:71,bubbles:!0,cancelable:!0};a?.dispatchEvent(new Q("keyup",u))})}function sn(){const e=tn();g(()=>{!e()||(Et(),Mt(),kt(),nn(),en(),Zt())})}sn();
